# üìò Dokumentasi Proyek PayloadCMS Backend Otomatis

---

## üß© Deskripsi Singkat

Backend ini dibangun menggunakan [PayloadCMS](https://payloadcms.com/) sebagai **CMS headless utama** untuk mengelola seluruh jenis konten: halaman, artikel, produk, layanan, dan lainnya.

Tujuan utama:

* üîÅ Konten bisa diambil otomatis dari berbagai sumber:
  * **AI Generator**: OpenAI, Gemini, Claude, Ollama
  * **RSS Feed**
  * **Marketplace (Shopee, Tokopedia, dll)**
* üñº Gambar otomatis:
  * Sumber gratis: Unsplash, Pixabay, Pexels
  * AI image: Replicate API, Ollama lokal
* üíæ Semua konten disimpan sebagai **rawContent** (mentah) sebelum masuk ke koleksi final (`posts`, `pages`, dsb.)
* ‚öôÔ∏è Didukung oleh cron job otomatis menggunakan Bree.js
* üåê Frontend disarankan menggunakan **Next.js** atau **Astro**

---

## üì¶ Stack Teknologi

| Komponen        | Teknologi atau Layanan                   |
| --------------- | ---------------------------------------- |
| CMS             | PayloadCMS (Node.js + TypeScript)        |
| Database        | MongoDB Atlas (Free Tier)                |
| AI Generator    | OpenAI, Gemini (via API), Claude, Ollama |
| AI Image Gen    | Replicate API (Stable Diffusion), Ollama |
| Image Search    | Unsplash, Pixabay, Pexels                |
| Scheduler       | Bree.js (cron jobs)                      |
| Frontend (opsi) | Astro / Next.js                          |
| Deployment      | Railway / Render / VPS                   |

---

## üìÅ Struktur Koleksi PayloadCMS

### 1. `rawContents`

Tempat penyimpanan awal konten dari AI, RSS, atau scraping.

**Fields:**

* `title`
* `content`
* `source`: enum `["AI", "RSS", "Scraper"]`
* `aiProvider`: `["openai", "gemini", "claude", "ollama"]` *(opsional)*
* `status`: enum `["draft", "published", "deleted"]`
* `reviewed`: boolean
* `image`: relasi ke `images`
* `tags`, `categories`
* `autoGenerated`: boolean
* `createdByAI`: boolean

---

### 2. Koleksi Final

* `posts`: Artikel blog
* `pages`: Halaman statis
* `products`: Produk marketplace
* `services`: Jasa/layanan

**Fields tambahan**: SEO meta, slug, hero image, content blocks

---

### 3. `images`

Gambar dari Pixabay, Unsplash, Pexels, atau AI.

**Fields:**

* `source`: URL atau base64
* `provider`: `["unsplash", "pixabay", "pexels", "ai"]`
* `linkedContent`: relasi ke raw/posts

---

### 4. `feeds`

Daftar RSS feed eksternal.

**Fields:**

* `url`
* `category`
* `active`
* `lastFetchedAt`

---

### 5. `scrapeSources`

URL marketplace & keyword yang digunakan oleh scraper eksternal.

---

### 6. `aiPrompts`

Template prompt untuk digunakan AI.

**Fields:**

* `title`
* `prompt`
* `type`: `["article", "product", "seo"]`
* `provider`: `["openai", "gemini", "claude", "ollama"]`

---

## üîÅ Alur Otomatisasi Konten

```
[AI | RSS | Scraper]
       ‚Üì
  rawContents (mentah)
       ‚Üì (reviewed)
 [posts/pages/products]
```

---

## ‚è± Cron Jobs (Bree.js)

### üì• `jobs/rssFetcher.ts`

* Fetch konten dari semua `feeds` aktif
* Simpan ke `rawContents`

### üß† `jobs/aiContentGenerator.ts`

* Ambil `aiPrompts` aktif
* Generate konten via:
  * OpenAI
  * Gemini API (MakerSuite via proxy)
  * Claude (via proxy API)
  * Ollama (lokal)
* Simpan ke `rawContents`

### üì§ `jobs/publishScheduler.ts`

* Publikasi otomatis konten `reviewed` (max 5 per hari)

---

## üîß Plugin & Ekstensi

### üéØ Plugin Utama (Wajib)

| Plugin                           | Fungsi                                | Link |
| -------------------------------- | ------------------------------------- | ---- |
| `payload-enchants`               | Import/export JSON, duplikat, sorting | [GitHub](https://github.com/r1tsuu/payload-enchants) |
| `payload-tools`                  | CLI backup/export                     | [GitHub](https://github.com/shefing/payload-tools) |

### üöÄ Plugin Tambahan (Rekomendasi)

| Plugin                           | Fungsi                                | Link |
| -------------------------------- | ------------------------------------- | ---- |
| `payload-plugin-cloud-storage`   | Upload ke cloud storage (AWS S3, GCS) | [NPM](https://www.npmjs.com/package/payload-plugin-cloud-storage) |
| `payload-plugin-seo`             | SEO meta fields otomatis              | [NPM](https://www.npmjs.com/package/payload-plugin-seo) |
| `payload-plugin-cloud`           | Deploy ke Vercel/Netlify              | [NPM](https://www.npmjs.com/package/payload-plugin-cloud) |
| `payload-plugin-vercel`          | Optimasi untuk Vercel deployment      | [NPM](https://www.npmjs.com/package/payload-plugin-vercel) |
| `payload-plugin-redis`           | Cache dengan Redis                    | [NPM](https://www.npmjs.com/package/payload-plugin-redis) |
| `payload-plugin-sentry`          | Error tracking & monitoring           | [NPM](https://www.npmjs.com/package/payload-plugin-sentry) |
| `payload-plugin-slug`            | Auto-generate slug dari title         | [NPM](https://www.npmjs.com/package/payload-plugin-slug) |
| `payload-plugin-richtext-slate`  | Rich text editor yang lebih powerful  | [NPM](https://www.npmjs.com/package/payload-plugin-richtext-slate) |
| `payload-plugin-email`           | Email notifications                   | [NPM](https://www.npmjs.com/package/payload-plugin-email) |
| `payload-plugin-webhooks`        | Webhook untuk integrasi eksternal     | [NPM](https://www.npmjs.com/package/payload-plugin-webhooks) |

### üé® Plugin UI/UX

| Plugin                           | Fungsi                                | Link |
| -------------------------------- | ------------------------------------- | ---- |
| `payload-plugin-color-picker`    | Color picker field                    | [NPM](https://www.npmjs.com/package/payload-plugin-color-picker) |
| `payload-plugin-relationship`    | Enhanced relationship fields           | [NPM](https://www.npmjs.com/package/payload-plugin-relationship) |
| `payload-plugin-media-library`   | Media library yang lebih advanced     | [NPM](https://www.npmjs.com/package/payload-plugin-media-library) |
| `payload-plugin-tabs`            | Tab interface untuk fields            | [NPM](https://www.npmjs.com/package/payload-plugin-tabs) |

### üîß Plugin Development

| Plugin                           | Fungsi                                | Link |
| -------------------------------- | ------------------------------------- | ---- |
| `payload-plugin-debug`           | Debug mode untuk development          | [NPM](https://www.npmjs.com/package/payload-plugin-debug) |
| `payload-plugin-testing`         | Testing utilities                     | [NPM](https://www.npmjs.com/package/payload-plugin-testing) |
| `payload-plugin-migrate`         | Database migration tools              | [NPM](https://www.npmjs.com/package/payload-plugin-migrate) |

### ü§ñ Plugin AI & Otomatisasi

| Plugin                           | Fungsi                                | Status |
| -------------------------------- | ------------------------------------- | ------ |
| `payload-openai-plugin` (custom) | Auto AI content generator             | üîÑ Custom |
| `unsplash-api`, `pixabay-api`    | Gambar otomatis                       | ‚úÖ Ready |
| `replicate-api`                  | Generate AI image (Stable Diffusion)  | ‚úÖ Ready |
| `payload-plugin-ai-assistant`    | AI assistant untuk admin panel        | üîÑ Custom |

---

## üîê Role Akses

| Role     | Akses                             |
| -------- | --------------------------------- |
| admin    | Full akses, semua koleksi         |
| editor   | Edit & mempromosikan rawContents  |
| reviewer | Hanya bisa review dan memberi tag |

---

## üì§ API Endpoint Contoh

### üîé Ambil semua rawContent

```
GET /api/raw-contents
```

### üöÄ Promote rawContent ke post

```
POST /api/promote/:id
Body:
{
  "target": "posts"
}
```

---

## üåç Integrasi AI Gratis

| Provider | Cara Akses                  | Status     |
| -------- | --------------------------- | ---------- |
| OpenAI   | Free tier via API key       | ‚úÖ Siap     |
| Gemini   | Via MakerSuite / proxy API  | ‚úÖ Opsional |
| Claude   | Via proxy API (npm wrapper) | ‚úÖ Opsional |
| Ollama   | Lokal (di VPS)              | ‚úÖ Lokal    |

> ‚ö†Ô∏è Gemini & Claude perlu backend proxy (contoh: Cloudflare Worker / Node middleware)

---

## üì∑ Sumber Gambar Otomatis

| Provider | Keterangan                            |
| -------- | ------------------------------------- |
| Unsplash | 50 request/jam (free tier)            |
| Pixabay  | Tidak butuh API key kadang            |
| Pexels   | 200 request/hari (free tier)          |
| AI Image | Replicate (Stable Diffusion) / Ollama |

---

## üöÄ Deployment Rekomendasi

| Platform      | Catatan                                    |
| ------------- | ------------------------------------------ |
| Railway       | 500 jam gratis/bulan                       |
| Render        | Alternatif Railway                         |
| VPS           | Untuk host Payload + Ollama lokal          |
| MongoDB Atlas | Free tier cukup untuk project menengah     |
| R2 (CDN)      | Opsional jika butuh penyimpanan gambar CDN |

---

## üß™ Testing & Validasi

* [ ] Cron job berjalan sesuai jadwal
* [ ] AI konten berhasil disimpan ke `rawContents`
* [ ] Gambar dari semua sumber berhasil masuk `images`
* [ ] Akses role berjalan sesuai aturan
* [ ] Promosi konten raw ke final (posts/pages)

---

## ‚öôÔ∏è Variabel Lingkungan (.env)

```env
OPENAI_API_KEY=sk-...
GEMINI_API_PROXY=https://your-proxy.vercel.app/api/gemini
CLAUDE_API_PROXY=https://your-proxy.com/claude
UNSPLASH_ACCESS_KEY=xxx
PIXABAY_API_KEY=xxx
MONGODB_URI=mongodb+srv://...
PAYLOAD_SECRET=your-secret
REPLICATE_API_TOKEN=your-token
```

---

## üì¶ Instalasi Plugin

### Plugin Wajib

```bash
npm install payload-enchants payload-tools
```

### Plugin Rekomendasi

```bash
npm install payload-plugin-cloud-storage payload-plugin-seo payload-plugin-cloud payload-plugin-vercel payload-plugin-redis payload-plugin-sentry payload-plugin-slug payload-plugin-richtext-slate payload-plugin-email payload-plugin-webhooks
```

### Plugin UI/UX

```bash
npm install payload-plugin-color-picker payload-plugin-relationship payload-plugin-media-library payload-plugin-tabs
```

### Plugin Development

```bash
npm install --save-dev payload-plugin-debug payload-plugin-testing payload-plugin-migrate
```

---

## üîß Konfigurasi Plugin

### payload-enchants

```typescript
import { buildConfig } from 'payload/config';
import { enchantsPlugin } from 'payload-enchants';

export default buildConfig({
  plugins: [
    enchantsPlugin({
      collections: ['posts', 'pages', 'rawContents'],
      enableDuplicate: true,
      enableImport: true,
      enableExport: true,
    }),
  ],
});
```

### payload-tools

```typescript
import { buildConfig } from 'payload/config';
import { toolsPlugin } from 'payload-tools';

export default buildConfig({
  plugins: [
    toolsPlugin({
      backup: {
        enabled: true,
        schedule: '0 2 * * *', // Daily at 2 AM
      },
      export: {
        enabled: true,
        collections: ['posts', 'pages'],
      },
    }),
  ],
});
```

### payload-plugin-seo

```typescript
import { buildConfig } from 'payload/config';
import { seoPlugin } from 'payload-plugin-seo';

export default buildConfig({
  plugins: [
    seoPlugin({
      collections: ['posts', 'pages'],
      generateTitle: ({ doc }) => `${doc.title} - My Site`,
      generateDescription: ({ doc }) => doc.excerpt || doc.content?.substring(0, 160),
    }),
  ],
});
```

---

## ‚úÖ Checklist Developer

* [ ] Setup struktur koleksi PayloadCMS
* [ ] Install plugin wajib (payload-enchants, payload-tools)
* [ ] Install plugin rekomendasi sesuai kebutuhan
* [ ] Implement semua job di folder `jobs/`
* [ ] Setup proxy untuk Gemini/Claude jika dipakai
* [ ] API gambar ke Unsplash, Pixabay, Pexels
* [ ] Integrasi Ollama (jika VPS tersedia)
* [ ] Endpoint promote, review, dan kontrol konten
* [ ] Konfigurasi plugin sesuai kebutuhan
* [ ] Testing semua fitur plugin

---

## üéØ Rekomendasi Plugin Berdasarkan Use Case

### üöÄ Untuk Startup/Produksi
- `payload-enchants` + `payload-tools` (wajib)
- `payload-plugin-seo` (SEO otomatis)
- `payload-plugin-cloud` (deployment mudah)
- `payload-plugin-sentry` (monitoring)

### üé® Untuk Content Heavy
- `payload-plugin-richtext-slate` (editor advanced)
- `payload-plugin-media-library` (media management)
- `payload-plugin-tabs` (organisasi field)
- `payload-plugin-slug` (URL otomatis)

### üîß Untuk Development
- `payload-plugin-debug` (debugging)
- `payload-plugin-testing` (testing)
- `payload-plugin-migrate` (database migration)

### ü§ñ Untuk AI Integration
- Custom AI plugins (OpenAI, Gemini, Claude)
- `payload-plugin-webhooks` (integrasi eksternal)
- `payload-plugin-email` (notifikasi)

---

## üìö Referensi & Link

- [PayloadCMS Documentation](https://payloadcms.com/docs)
- [payload-enchants GitHub](https://github.com/r1tsuu/payload-enchants)
- [payload-tools GitHub](https://github.com/shefing/payload-tools)
- [PayloadCMS Plugins Directory](https://payloadcms.com/plugins)

---

**Dokumentasi ini akan terus diperbarui sesuai dengan perkembangan plugin dan teknologi terbaru.**